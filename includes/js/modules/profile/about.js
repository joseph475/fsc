var AboutModel=Backbone.Model.extend({defaults:{user_id:"",about_me:"",talent:"",movies:"",music:"",website:"",photo:""},url:function(){return BASE_URL+"api/user/id/"+this.get("user_id")+"/about"},validate:function(a){}});var AboutView=Backbone.View.extend({el:$("#about-tab"),initialize:function(){this.$el.find("#cancel-btn").hide()},events:{"click #edit-btn":"toggleInput","click #cancel-btn":"toggleDisplay","click #save-btn":"saveAbout"},toggleInput:function(a){a.preventDefault();this.$el.find(".ab").each(function(c,d){var e;if($(d).attr("id")!="website"){e=$(d).html()}else{e=$("#website a").text()}var b;if($(d).hasClass("ab-txtarea")){b=$('<textarea class="span" rows="5"></textarea>')}else{if($(d).hasClass("ab-input")){b=$('<input type="text"></input>')}}b.attr("name",$(d).attr("id")).val(e);$(d).html(b)});this.$el.find("#edit-btn").hide();this.$el.find("#save-btn").show();this.$el.find("#cancel-btn").show()},toggleDisplay:function(a){a.preventDefault();this.$el.find(".ab input, .ab textarea").each(function(b,c){if($(c).parent("p").attr("id")!="website"){val=$(c).val()}else{val=$("<a></a>").attr("href",$(c).val()).attr("target","_blank").text($(c).val())}$(c).parent("p").html(val)});this.$el.find("#edit-btn").show();this.$el.find("#save-btn").hide();this.$el.find("#cancel-btn").hide()},saveAbout:function(b){var a=this;var c=Array;$.map($(".ab input, .ab textarea").serializeArray(),function(e,d){c[e.name]=e.value});this.options.model.save(c,{success:function(e,d){alert=new AlertView({type:"success",message:"Update success."});alert.render();$("#cancel-btn").trigger("click")},error:function(e,d){alert=new AlertView({type:"error",message:d});alert.render()}})}});var AlertView=Backbone.View.extend({el:$("#alert-div"),template:$("#alertTemplate").html(),render:function(){var a=_.template(this.template);var b=Array;b.type=this.options.type;b.message=this.options.message;this.$el.html(a(b));return this}});