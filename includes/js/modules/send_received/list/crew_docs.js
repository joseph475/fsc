var crewDocsModel=Backbone.Model.extend({idAttribute:"id",url:function(){if(this.isNew()){return BASE_URL+"api/crew_doc"}else{return BASE_URL+"api/crew_doc/id/"+this.get("id")}},defaults:{document:"",crew_id:0,docs_id:0,docs_nos:"",date_issued:"0000-00-00",date_expired:"0000-00-00",remarks:"",published:0,file_docs:"",docs_file:"",position_id:0}});var crewDocsMasterView=Backbone.View.extend({el:$("#options-list-view"),initialize:function(){this.collection.isLoading=false;this.collection.on("add",this.renderOptions,this);this.collection.on("reset",this.render,this);this.collection.on("fetch",function(){this.collection.isLoading=true},this);if(this.collection.size()==0){e_model=new crewDocsModel();this.collection.push(e_model)}this.collection.currentPage=0;this.collection.pager()},render:function(){var a=this;this.collection.isLoading=false;$("#jomdic").empty();this.collection.each(this.renderOptions,this)},renderOptions:function(b){var a=new crewDocsView({model:b});$("#jomdic").append(a.render().el)}});var crewDocsView=Backbone.View.extend({tagName:"label",template:$("#jpd").html(),events:{'change input[type="checkbox"]':"change"},change:function(b){change={};change[$(b.target).attr("name")]=$(b.target).val();var a=new crewDocsModel();a.set(change,{silent:true})},render:function(){var a=_.template(this.template);this.$el.html(a(this.model.toJSON()));return this}});var crewDocsCollection=Backbone.Paginator.requestPager.extend({model:crewDocsModel,crew_id:0,paginator_core:{type:"GET",dataType:"json",url:BASE_URL+"api/crew_docs?"},paginator_ui:{firstPage:1,currentPage:1,perPage:10000,sortField:"sort_order",sortDir:"asc",searchField:null,searchVal:null,totalPages:10},server_api:{crew_id:function(){return this.crew_id},limit:function(){return this.perPage},offset:function(){if(this.currentPage==0){this.currentPage=1}return(this.currentPage-1)*this.perPage},sort:function(){return this.sortField},order:function(){return this.sortDir},searchField:function(){return this.searchField},searchVal:function(){return this.searchVal}},parse:function(a){var b=a.data;this.totalPages=Math.floor(a._count/this.perPage);this.totalRecords=a._count;return b}});