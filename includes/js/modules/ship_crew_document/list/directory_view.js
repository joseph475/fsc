var DirectoryView=Backbone.View.extend({el:$("#options-list-view"),initialize:function(){$(".sortcolumn").css("cursor","pointer");if(this.options.status_id==undefined){}this.collection.isLoading=false;this.collection.status_id=1;this.collection.on("add",this.renderOptions,this);this.collection.on("add",this.renderOptionsform,this);this.collection.on("reset",this.render,this);this.collection.on("fetch",function(){this.collection.isLoading=true;$("#loader-container").html('<img src="'+BASE_URL+'includes/img/ajax-loader.gif" />')},this);this.showStatus()},events:{"click .sortcolumn":"updateSortBy","change #vessel_id":"toggleSearch","click #submit-search":"toggleSearch","click #loadmore-options":"loadMore","click .record-set":"setPost"},setPost:function(b){b.preventDefault();var a=this;$("#setData").live("show",function(){$(this).find(".btn-success").die().live("click",function(){var c=Array;$.map($(".inopts select").serializeArray(),function(e,d){c[e.name]=e.value});options=new Signature();options.set("user_id",a.collection.user_id);options.save(c,{success:function(e,d){this.$el=$("#addData");this.$el.modal("hide")},error:function(e,d){alert=new AlertView({type:"error",message:d});alert.render()}})})}).modal()},loadMore:function(a){this.collection.requestNextPage()},toggleSearch:function(a){a.preventDefault();$("#options-table-1 tbody").empty();this.collection.currentPage=1;this.collection.vessel_id=$("#vessel_id").val();this.collection.searchVal=$("#search").val();this.collection.pager()},updateSortBy:function(a){if(this.collection.sortDir=="desc"){dir="asc"}else{dir="desc"}this.collection.sortDir=String(dir);this.collection.updateOrder($(a.target).attr("col"))},showStatus:function(b){window.location.hash="/status/1";var a=this.collection;a.vessel_id=$("#vessel_id").val();a.currentPage=0;a.pager()},render:function(){var a=this;$("#loader-container").empty();this.collection.isLoading=false;if($("#load-more-container").is(":hidden")){$("#options-table-1 tbody").empty()}this.collection.each(this.renderOptions,this);this.collection.each(this.renderOptionsform,this);$("#search").typeahead({source:function(c,d){queryAttributes={};queryAttributes.searchVal=c;var b=[];$.ajax({url:a.collection.paginator_core.url,data:queryAttributes,dataType:"json",success:function(e){typeAheadCollection=new TypeAheadCollection(e.data);return d(typeAheadCollection.pluck("fullname"))}})},minLength:4});$('[rel="clickover"]').clickover({placement:get_popover_placement,html:true})},renderOptions:function(b){var a=new OptionsView({model:b});$("#options-table-1 tbody").append(a.render().el)},renderOptionsform:function(a){var b=new OptionsForm({model:a});$("#container-option-set").append(b.render().el)}});var OptionsView=Backbone.View.extend({tagName:"tr",template:$("#emp-list-item").html(),render:function(){var a=_.template(this.template);this.$el.html(a(this.model.toJSON()));return this}});var OptionsForm=Backbone.View.extend({template:$("#container-option-set"),addTemplate:_.template($("#option-set-template").html()),render:function(){this.template.empty();this.template.html(this.addTemplate(this.model.toJSON()));return this}});