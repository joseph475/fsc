$.fn.customFileInput=function(options){var fileInput=$(this);var settings=jQuery.extend({button_position:'right',classes:fileInput.attr('class'),feedback_text:'No file selected...',button_text:'Browse',button_change_text:'Change'},options);fileInput.addClass('customfile-input').focus(function(){upload.addClass('customfile-focus');fileInput.data('val',fileInput.val());}).blur(function(){upload.removeClass('customfile-focus');$(this).trigger('checkChange');}).bind('disable',function(){fileInput.attr('disabled',true);upload.addClass('customfile-disabled');}).bind('enable',function(){fileInput.removeAttr('disabled');upload.removeClass('customfile-disabled');}).bind('checkChange',function(){if(fileInput.val()&&fileInput.val()!=fileInput.data('val')){fileInput.trigger('change');}}).bind('change',function(){var fileName=$(this).val().split(/\\/).pop();var fileExt='customfile-ext-'+fileName.split('.').pop().toLowerCase();uploadFeedback.css({width:'-=21'}).text(fileName).removeClass(uploadFeedback.data('fileExt')||'').addClass(fileExt).data('fileExt',fileExt).addClass('customfile-feedback-populated');uploadButton.text(settings.button_change_text);}).click(function(){fileInput.data('val',fileInput.val());setTimeout(function(){fileInput.trigger('checkChange');},100);});var upload=$('<div class="input-'+(('right'===settings.button_position)?'append':'prepend')+' customfile">');var uploadFeedback=$('<span class="customfile-feedback" aria-hidden="true">'+settings.feedback_text+'</span>').appendTo(upload);var uploadButton=$('<span class="add-on customfile-button" aria-hidden="true">'+settings.button_text+'</span>').css({float:settings.button_position});if('right'===settings.button_position){uploadButton.insertAfter(uploadFeedback);}else uploadButton.insertBefore(uploadFeedback);if(fileInput.is('[disabled]')){fileInput.trigger('disable');}else upload.click(function(){fileInput.trigger('click');});upload.insertAfter(fileInput);fileInput.insertAfter(upload);return $(this);};